CREATE DATABASE ams
    WITH 
    OWNER = postgres
    ENCODING = 'UTF8'
    CONNECTION LIMIT = -1;
    
create table attendance (attendance_id int8 generated by default as identity, date date, json varchar(1000), period_id int8, subject_id int8, teach_id int8, primary key (attendance_id));
create table class_period (period_id int8 generated by default as identity, from_time time, to_time time, primary key (period_id));
create table class_section (section_id int8 generated by default as identity, class_id int8, section_name varchar(255), primary key (section_id));
create table section_student (section_id int8 not null, stud_id int8 not null, primary key (section_id, stud_id));
create table section_subject (subject_id int8 generated by default as identity, section_id int8, subject_name varchar(255), primary key (subject_id));
create table stud_class (class_id int8 generated by default as identity, class_name varchar(255), class_year int4, end_date date, start_date date, primary key (class_id));
create table student (id int8 generated by default as identity, dob date, email varchar(255), first_name varchar(255), gender varchar(255), last_name varchar(255), middle_name varchar(255), mobile_number int8, profile oid, role_number varchar(255), primary key (id));
create table teacher (id int8 generated by default as identity, dob date, first_name varchar(255), gender varchar(255), last_name varchar(255), middle_name varchar(255), mobile_number int8, teacher_number varchar(255), primary key (id));
create table teacher_subject (sub_id int8 not null, teach_id int8 not null, primary key (sub_id, teach_id));
create table users (user_id int8 generated by default as identity, account_type varchar(255), activated boolean, id int8, password varchar(255), username varchar(255), primary key (user_id));
alter table if exists class_section add constraint FKi65yeqy1o7n4icu1k47mm7y98 foreign key (class_id) references stud_class;
alter table if exists section_subject add constraint FK5dj7hfbr9t0h0dt9asmovsx4c foreign key (section_id) references class_section;
alter table if exists teacher_subject add constraint FK9pcoixea98nyts5793rosupx9 foreign key (sub_id) references section_subject;

insert into stud_class (class_name, class_year, end_date, start_date) values (?, ?, ?, ?)
insert into class_section (class_id, section_name) values (?, ?)
insert into section_subject (section_id, subject_name) values (?, ?)
insert into class_period (from_time, to_time) values (?, ?)
insert into attendance (date, json, period_id, subject_id, teach_id) values (?, ?, ?, ?, ?)
insert into section_student (section_id, stud_id) values (?, ?)
insert into teacher_subject (sub_id, teach_id) values (?, ?)
insert into teacher (dob, first_name, gender, last_name, middle_name, mobile_number, teacher_number) values (?, ?, ?, ?, ?, ?, ?)
insert into student (dob, email, first_name, gender, last_name, middle_name, mobile_number, profile, role_number) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
insert into users (account_type, activated, id, password, username) values (?, ?, ?, ?, ?)